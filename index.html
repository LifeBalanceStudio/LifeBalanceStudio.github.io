<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LifeBalace Studio</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    :root{ --fg:#fff; --bg:#000; --muted:#9aa0a6; --accent:#ffeb3b; }
    body{ margin:0; background:var(--bg); color:var(--fg); font-family:'Press Start 2P',cursive; overflow:hidden; }

    /* Falling dots canvas */
    #stars{ position:fixed; inset:0; width:100%; height:100%; z-index:0 }

    /* Layout */
    .wrap{ position:relative; z-index:1; display:flex; flex-direction:column; align-items:center; margin-top:60px; }
    header h1{ margin:20px 0; font-size:24px; text-align:center }

    /* Intro lines */
    .intro{ margin-top:10px; text-align:center; font-size:12px; line-height:1.8; }
    .intro .line{ display:block; }

    /* Game list */
    .game-list{ margin-top:60px; display:flex; flex-direction:column; align-items:flex-start; position:relative }
    .item{ display:block; text-decoration:none; color:var(--fg); margin:10px 0; line-height:1.6; position:relative }
    .item[aria-current="true"]{ color:var(--accent) }

    /* Cursor: CSS triangle for pixel-perfect apex; instant movement */
    .cursor{ position:absolute; left:-28px; top:0; line-height:0; transform:translateY(-50%); }
    .cursor > i{ display:block; width:0; height:0; border-style:solid; border-width:0.65em 0 0.65em 1.0em; border-color:transparent transparent transparent #fff; }

    .hint{ margin-top:14px; font-size:10px; color:var(--muted) }

    /* Detail screens */
    .screen{ display:none }
    .screen.active{ display:block }
    .detail{ position:absolute; inset:0; padding:18vh 6vw 8vh; background:rgba(0,0,0,.86); backdrop-filter:blur(2px); z-index:2 }
    .detail h2{ margin:0 0 18px; font-size:20px }
    .detail p{ font-size:12px; line-height:1.3; color:#d7d7d7; margin:0 0 16px }

    /* Store & back links list */
    .stores{ list-style:none; padding:0; margin:8px 0 0; max-width:min(720px,92vw); position:relative }
    .stores li{ display:flex; align-items:center; gap:10px; margin:10px 0; }
    .stores a{ color:#fff; text-decoration:underline; }
    .stores a[aria-current="true"]{ color:var(--accent); text-decoration:none; border-bottom:1px dashed var(--accent); }

    /* Detail cursor (left of store list) */
    .d-cursor{ position:absolute; margin-left:-22px; line-height:0; transform:translateY(-50%); }
    .d-cursor > i{ display:block; width:0; height:0; border-style:solid; border-width:0.55em 0 0.55em 0.9em; border-color:transparent transparent transparent #fff; }
  </style>
</head>
<body>
  <canvas id="stars"></canvas>
  <div class="wrap">
    <header><h1>LifeBalace Studio</h1></header>

    <div class="intro">
      <span class="line">I make games.</span>
      <span class="line">The assets might be a bit rough,</span>
      <span class="line">but I’m taking my time making simple games.</span>
    </div>

    <!-- 메인 게임 목록 -->
    <nav class="game-list" id="gameList" aria-label="게임 목록">
      <div class="cursor" id="cursor"><i aria-hidden="true"></i></div>
      <a class="item" href="#game-1" data-index="0">Uncap</a>
      <a class="item" href="#game-2" data-index="1">(In Progress)</a>
      <a class="item" href="#game-3" data-index="2">(In Progress 2)</a>
      <a class="item" href="#game-4" data-index="3">(In Progress 3)</a>
      <a class="item" href="index_v2.html" data-index="3">Change Webpage Type</a>
    </nav>
    <div class="hint">W/S or ↑/↓: Move · Enter/Space: Open/Close · ESC/BACKSPACE: Close</div>

    <!-- 상세 페이지들 -->
    <main>
      <section id="game-1" class="screen detail" aria-labelledby="g1-title">
        <h2 id="g1-title">Uncap</h2>
        <p>Just uncap<br>the bottle cap.</p>
        <ul class="stores" data-detail="1">
          <div class="d-cursor" aria-hidden="true"><i></i></div>
          <li><a href="https://play.google.com/store/apps/details?id=com.LifeBalance.Uncap" target="_blank" rel="noopener" data-index="0">Google Play (AOS)</a></li>
          <li><a href="#" data-index="1" data-back="1">Back</a></li>
        </ul>
      </section>

      <section id="game-2" class="screen detail" aria-labelledby="g2-title">
        <h2 id="g2-title">(In Progress)</h2>
        <p>You can play this game with up to both hands.<br>MAYBE.</p>
        <ul class="stores" data-detail="2">
          <div class="d-cursor" aria-hidden="true"><i></i></div>
          <li><target="_blank" rel="noopener" data-index="0">Google Play (AOS)(SOON)</a></li>
          <li><a href="#" data-index="1" data-back="1">Back</a></li>
        </ul>
      </section>

      <section id="game-3" class="screen detail" aria-labelledby="g3-title">
        <h2 id="g3-title">(In Progress 2)</h2>
        <p>It’s an endless runner game. It will be made based on one of the two plans I have in mind.</p>
        <ul class="stores" data-detail="3">
          <div class="d-cursor" aria-hidden="true"><i></i></div>
          <li><target="_blank" rel="noopener" data-index="0">Google Play (AOS)(SOON)</a></li>
          <li><a href="#" data-index="1" data-back="1">Back</a></li>
        </ul>
      </section>
	  
	  <section id="game-4" class="screen detail" aria-labelledby="g4-title">
        <h2 id="g3-title">(In Progress 3)</h2>
        <p>It is a game that carries a message.<br>This is the final stage of my first journey.</p>
        <ul class="stores" data-detail="3">
          <div class="d-cursor" aria-hidden="true"><i></i></div>
          <li><target="_blank" rel="noopener" data-index="0">Google Play (AOS)(SOON)</a></li>
          <li><a href="#" data-index="1" data-back="1">Back</a></li>
        </ul>
      </section>
    </main>
  </div>

  <script>
    // ---------------- Falling dots (3 speed tiers)
    const canvas = document.getElementById('stars');
    const ctx = canvas.getContext('2d');
    let w, h, dots = []; const speeds = [30, 60, 110];
    function resize(){ w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight; initDots(); }
    function initDots(){ dots.length = 0; for(const speed of speeds){ for(let i=0;i<40;i++){ dots.push({ x:Math.random()*w, y:Math.random()*h, speed, size:1+Math.random()*2 }); } } }
    function loop(){ ctx.clearRect(0,0,w,h); ctx.fillStyle = '#fff'; for(const d of dots){ d.y += d.speed * 0.016; if(d.y>h) d.y = -d.size; ctx.fillRect(d.x,d.y,d.size,d.size); } requestAnimationFrame(loop); }
    window.addEventListener('resize', resize); resize(); loop();

    // ---------------- Utilities
    const items = Array.from(document.querySelectorAll('.item'));
    const cursor = document.getElementById('cursor');
    const screens = Array.from(document.querySelectorAll('.screen'));

    function detailOpen(){ return Boolean(location.hash); }
    function activeScreen(){ if(!detailOpen()) return null; const id = location.hash.slice(1); return document.getElementById(id); }

    // ---------------- Main list cursor
    let index = 0;
    function centerCursorTo(target){
      const BASELINE_NUDGE = -2; // 미세 보정
      const mid = target.offsetTop + (target.offsetHeight/2) + BASELINE_NUDGE;
      cursor.style.top = mid + 'px';
    }
    function setIndex(i){ index = (i + items.length) % items.length; items.forEach((a,idx)=>a.setAttribute('aria-current', String(idx===index))); centerCursorTo(items[index]); }

    // ---------------- Detail store/back navigation
    function getDetailLinks(sc){
      if(!sc) return [];
      const ul = sc.querySelector('.stores');
      if(!ul) return [];
      return Array.from(ul.querySelectorAll('a'));
    }
    function getDetailCursor(sc){ return sc ? sc.querySelector('.d-cursor') : null; }

    let dIndex = 0; // 상세 내 선택 인덱스
    function setDetailIndex(sc, i){
      const links = getDetailLinks(sc);
      if(links.length === 0) return;
      dIndex = (i + links.length) % links.length;
      links.forEach((a,idx)=>a.setAttribute('aria-current', String(idx===dIndex)));
      // 커서 위치 업데이트 (각 링크의 세로 중앙)
      const target = links[dIndex];
      const dc = getDetailCursor(sc);
      if(dc){
        const mid = target.offsetTop + (target.offsetHeight/2) - 2; // 소폭 보정
        dc.style.position = 'absolute';
        dc.style.top = mid + 'px';
      }
    }

    function updateScreens(){
      const hash = location.hash;
      screens.forEach(sc => sc.classList.toggle('active', ('#'+sc.id) === hash));
      // 상세가 열릴 때 상세 커서 초기화
      if(detailOpen()){
        const sc = activeScreen();
        setDetailIndex(sc, 0);
      }
    }

    function openSelected(){
      const hash = location.hash;
      const href = items[index].getAttribute('href');
      // 토글: 이미 같은 상세면 닫기
      if(hash && ('#'+items[index].getAttribute('href').substring(1)) === hash){
        closeDetail();
        return;
      }
      if(!href) return;
      if(href === 'index_v2.html') { window.location.href = 'index_v2.html'; return; }
      location.hash = href; // 상세 열기
      updateScreens();
    }
    function closeDetail(){ history.pushState('', document.title, window.location.pathname + window.location.search); updateScreens(); }

    // 초기 위치 및 화면 상태
    if(document.fonts && document.fonts.ready){ document.fonts.ready.then(()=>{ setIndex(0); updateScreens(); }); }
    else { setIndex(0); updateScreens(); }

    // 마우스 상호작용 (메인 목록)
    items.forEach((a,i)=>{
      a.addEventListener('mouseenter',()=>{ if(!detailOpen()) setIndex(i); });
      a.addEventListener('click',(e)=>{ e.preventDefault(); if(!detailOpen()){ setIndex(i); if(a.getAttribute('href')==='index_v2.html'){ window.location.href='index_v2.html'; } else { openSelected(); } } });
    });

    // 상세 내 링크 hover/클릭 처리 (Back 포함)
    document.querySelectorAll('.stores a').forEach(a=>{
      a.addEventListener('mouseenter',()=>{ const sc = activeScreen(); if(sc){ const links = getDetailLinks(sc); const idx = links.indexOf(a); if(idx>=0) setDetailIndex(sc, idx); } });
      a.addEventListener('click',(e)=>{
        const sc = activeScreen(); if(!sc) return;
        if(a.dataset.back === '1'){ e.preventDefault(); closeDetail(); }
      });
    });

    // ---------------- Keyboard controls
    window.addEventListener('keydown',(e)=>{
      // 공통: Space/페이지키 스크롤 방지
      if(e.key === ' ' || e.key === 'PageDown' || e.key === 'PageUp') e.preventDefault();

      if(!detailOpen()){
        // 메인 목록 조작
        if(e.key==='w'||e.key==='W'||e.key==='ArrowUp'){ setIndex(index-1); }
        else if(e.key==='s'||e.key==='S'||e.key==='ArrowDown'){ setIndex(index+1); }
        else if(e.key==='Enter' || e.key===' '){ 
          const href = items[index].getAttribute('href');
          if(href==='index_v2.html'){ window.location.href='index_v2.html'; } else { openSelected(); }
        }
      } else {
        // 상세 화면 조작 (상점 + Back)
        const sc = activeScreen();
        const links = getDetailLinks(sc);
        if(e.key==='w'||e.key==='W'||e.key==='ArrowUp'){ if(links.length) setDetailIndex(sc, dIndex-1); }
        else if(e.key==='s'||e.key==='S'||e.key==='ArrowDown'){ if(links.length) setDetailIndex(sc, dIndex+1); }
        else if(e.key==='Enter' || e.key===' '){
          if(!links.length) { closeDetail(); return; }
          const a = links[dIndex];
          if(a.dataset.back === '1'){ closeDetail(); }
          else { a.click(); }
        }
        else if(e.key==='Escape' || e.key==='Backspace'){ closeDetail(); }
      }
    });

    window.addEventListener('hashchange', updateScreens);
  </script>
</body>
</html>
